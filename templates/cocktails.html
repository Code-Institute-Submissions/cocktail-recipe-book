{% extends 'base.html'%} {% block content %}
<div id="sorting-bar" class="row #00695c teal darken-3">
    <h4 class="art-deco-font col s12 m5">Help yourself to a cocktail!</h4>
    <a id="sort-by-rating-button" class="waves-effect waves-light btn white col s6 m3"><i class="fas fa-star"></i> Sort by Rating</a>
    <a id="sort-by-date-button" class="waves-effect waves-light btn white col s6 m3"><i class="fas fa-exclamation"></i> See Newest First</a>
</div>
<div id="recipe-cards" class="row">
    {% for recipe in recipes %}
        <div class="col s12 m4 l3 recipe-card" id="cocktail-card" data-rating="{{recipe.average_rating}}" data-date="{{recipe.date_added}}">
            <div class="card">
                <div class="card-image">
                    <img src="{{recipe.recipe_image}}">
                    <div class="card-title card-title-spice">
                        <span id="recipe_name" name="recipe_name" class="card-title art-deco-font">{{recipe.recipe_name}}</span>
                    </div>
                </div>
                <div class="card-content class-size">
                    <p id="description">{{recipe.recipe_description}}</p>
                </div>
                <div class="card-action">
                    <a href="/show_cocktail/{{ recipe.recipe_url }}">See Recipe</a>
                </div>
            </div>
            <!-- more display -->
        </div>
    {% endfor %} 
    </div>
    <div id="load-more-spice">
        <a id="loadMore" class="btn-small center #880e4f pink darken-4">Load More <i class="fas fa-plus fa-xs"></i></a>
    </div>
<!-- Below, the script containing the sorting options for the recipes -->
<script>
    $(document).ready(function() {
        
        // Sorting by rating - START
        $("#sort-by-rating-button").on("click", function() {
            $(".recipe-card").sort(sort_recipes).appendTo('#recipe-cards');
            function sort_recipes(a, b) {
                return ($(b).data('rating')) < ($(a).data('rating')) ? -1 : 1;
            }
        });
        // Sorting by rating - END
        
        // Sorting by date - START
        $("#sort-by-date-button").on("click", function() {
            $(".recipe-card").sort(sort_recipes).appendTo('#recipe-cards');
            function sort_recipes(a, b) {
                return ($(b).data('date')) < ($(a).data('date')) ? -1 : 1;
            }
        });
        // Sorting by date - END
        
    });
</script>
{% endblock %}

